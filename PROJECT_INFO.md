# 宠物店财务与预订管理系统 PRD

## 产品名称

宠物店财务与预订管理系统

## 版本

v1.2

## 负责人

产品经理 / 技术负责人

## 目标上线时间

TBD

---

## 一、背景与目标

线下宠物店常见痛点：

- **财务混乱**：洗澡、美容、寄养、用品销售等收入来源多，缺乏统一管理。
- **预约混乱**：客户通过电话/微信预约，容易遗漏或重复。
- **绩效分成复杂**：技师（宠物美容师）、店长分成需要手工计算，出错率高。

**目标**：

1. 提供统一的 **财务收支管理** 与 **预约管理** 平台。
2. 自动化 **分成与绩效统计**，降低人工成本。
3. 支持 **低成本快速开发**，保证后期可扩展。

---

## 二、用户角色

1. **店长 / 财务人员**
   - 管理财务数据、配置分成规则、查看报表。
2. **前台 / 店员**
   - 录入预约、确认顾客支付、生成订单。
3. **宠物美容师 / 技师**
   - 查看预约安排，完成项目，查看绩效。
4. **顾客（未来扩展）**
   - 在线预约服务，查看消费记录。

---

## 三、核心功能需求

### 1. 财务管理

- **收入管理**：宠物洗澡、美容、寄养、用品销售。
- **支付方式**：现金 / 微信 / 支付宝 / 银行卡。
- **自动分成**：根据可配置规则，按比例分账（如 技师60% / 店长40%，但比例可调）。
- **支出管理**：房租、水电、工资、耗材、营销。
- **现金流总览**：收入、支出、净利润，支持导出报表。

### 2. 预约管理

- 客户信息：宠物主人姓名、电话、宠物信息（名字、种类、体重）。
- 服务项目：洗澡、美容、寄养、疫苗、用品购买。
- 预约排期：支持日历视图，检测时间冲突。
- 到店提醒：短信/微信（未来扩展）。

### 3. 员工绩效与分成

- 员工档案：姓名、角色、联系方式、技能标签。
- **分成规则可配置**：
  - 支持按角色（美容师/店长）设置比例。
  - 支持“固定金额 + 分成比例”的混合模式。
- 系统自动生成分成流水，写入财务与绩效统计。

### 4. 报表与分析

- 每日收入/支出统计。
- 员工绩效对比（美容师 vs 店长）。
- 服务项目热度分析（洗澡、美容、寄养等占比）。
- 客户消费分析（高频客户、宠物档案）。

---

## 四、非功能需求

- **低成本优先**：尽量减少复杂度，用现成框架/库。
- **数据安全**：本地数据库 + 云端备份。
- **多端支持**：桌面端（店长/财务）、iPad（前台）、移动端（技师）。
- **快速上手**：简单界面，避免复杂培训。

---

## 五、数据结构 (示例)

\`\`\`ts
// 宠物主人
Customer {
id: string,
name: string,
phone: string,
pets: Pet[]
}

// 宠物
Pet {
id: string,
name: string,
type: "dog" | "cat" | "other",
weight?: number
}

// 预约
Booking {
id: string,
customerId: string,
petId: string,
serviceId: string,
staffId: string,
date: Date,
status: "pending" | "confirmed" | "completed" | "canceled"
}

// 财务流水
Transaction {
id: string,
type: "income" | "expense",
category: string,
amount: number,
paymentMethod: "cash" | "wechat" | "alipay" | "card",
date: Date,
commission: CommissionSplit
}

// 分成规则
CommissionRule {
id: string,
role: "technician" | "manager",
percentage: number, // 可配置
fixedAmount?: number
}
\`\`\`

---

## 六、业务流程

1. **客户预约宠物服务** → 前台录入 → 系统检测冲突 → 确认。
2. **到店消费** → 前台确认服务完成 → 生成订单与收入流水。
3. **系统自动分成**（根据 CommissionRule 计算）。
4. **月度结算** → 店长查看报表：技师收入、店长收入、店铺净利润。
5. **导出报表** → Excel / PDF。

---

## 七、技术栈（低成本开发方案）

### 前端

- **React + Vite**：轻量快速开发。
- **MUI + Tailwind CSS**：UI 组件库 + 灵活样式。
- **React Query**：数据请求与缓存。

### 后端

- **Node.js + Express / NestJS (轻量化优先 Express)**
- **SQLite (单店模式)** → 后期可换 MySQL / Postgres。
- **Prisma**：ORM，快速建模。

### 部署

- **前后端一体化部署**：Vercel (前端) + Render / Railway (后端)。
- **数据库**：低成本用 Supabase / Planetscale 免费档。

### 第三方服务

- **身份认证**：Clerk / Supabase Auth。
- **报表导出**：jsPDF / ExcelJS。
- **消息提醒（可选）**：Twilio / 微信小程序订阅消息。

---

## 八、未来扩展

- 宠物会员卡（储值卡 / 次卡）。
- 宠物健康档案（疫苗、体检记录）。
- 宠物电商（用品销售、寄养套餐）。
- 小程序预约入口。
